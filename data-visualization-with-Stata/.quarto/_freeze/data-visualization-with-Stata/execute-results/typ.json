{
  "hash": "c6b9b4cea632856ba65d906243ec1d39",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Data Visualization With Stata\"\nauthors: \"Andy Grogan-Kaylor\"\ndate: \"today\"\nformat:\n  html:\n    toc: true\n    number-sections: true\n    theme:\n      light: yeti\n      dark: vapor\n    mermaid: \n      theme: default\n    css: styles.css\n  typst: \n    toc: true\n    number-sections: true\n---\n\n\n\n\n# Introduction \n\n\n\n\n::: {.cell}\n\n:::\n\n\n\n\n\n> Stata is a powerful and intuitive data analysis program. Learning how to graph in Stata is an important part of learning how to use Stata. Yet, until recently, the default graphs in Stata have been less than optimal. However, recent versions of Stata have a very professional looking and aesthetically appealing default graph scheme.\n\n> This document is an introduction to (a) basic graphing ideas in Stata; and (b) a quick note on the use of schemes to customize your Stata graphs.\n\n# What are Variables?\n\n* By variables, I simply mean the columns of data that you have.\n* For our purposes, you may think of variables as synonymous with questionnaire items, or columns of data.\n\n|          | Column 1 | Column 2 | Column 3 |\n|----------|----------|----------|----------|\n| Row    1 |          |          |          |\n| Row    2 |          |          |          |\n| Row    3 |          |          |          |\n\n# Variable Types\n\n* *Categorical variables* represent unordered categories like *race*, *ethnicity*, *neighborhood*, *religious affiliation*, or *place of residence*.\n* *Continuous variables* represent a continuous scale like *income*, a *mental health scale*, or a *measure of life expectancy*.\n\n# A Data Visualization Strategy\n\nOnce we have discerned the type of variable that have, there are two followup questions we may ask before deciding upon a graphing strategy:\n\n* Is our graph about **one thing at a time**?\n  + How much of *x* is there? \n  + What is the distribution of *x*?\n* Is our graph about **two things at a time**?\n  + What is the relationship of *x* and *y*?\n  + How are *x* and *y* associated?\n\n\n# Data Source\n\n![Norway Spruce and Larch Forest in Austrian Alps](fotolia-small.jpg){ width=40% }\n\nImage Source: [https://ec.europa.eu/jrc/en/research-topic/forestry/qr-tree-project/norway-spruce](https://ec.europa.eu/jrc/en/research-topic/forestry/qr-tree-project/norway-spruce)\n\nThe data used in this example are derived from the R package *Functions and Datasets for \"Forest Analytics with R\"*.\n\nAccording to the documentation, the source of these data are: \"von Guttenberg’s Norway spruce (Picea abies [L.] Karst) tree measurement data.\"\n\n![Old Tjikko, a 9,550 Year Old Norway Spruce in Sweden](Old-Tjikko-Small.jpg){ width=20% }\n\nThe documentation goes on to further note that:\n\n> \"The data are measures from 107 trees. The trees were selected as being of average size from healthy and well stocked stands in the Alps.\"\n\n\n\n\n::: {.cell collectcode='true'}\n\n```{.stata .cell-code}\n\nuse \"https://github.com/agrogan1/Stata/raw/main/data-visualization-with-Stata/gutten.dta\", clear\n\n```\n:::\n\n\n\n\n# Variables\n\n`site` Growth *quality* class of the tree’s habitat. 5 levels.\n\n`location` Distinguishes tree *location*. 7 levels.\n\n`tree` An identifier for the tree within location.\n\n`age_base` The tree age taken at ground level.\n\t\n`height` Tree height, m.\n\n`dbh_cm` Tree diameter, cm.\n\n`volume` Tree volume.\n\n`age_bh` Tree age taken at 1.3 m.\n\n`tree.ID` A factor uniquely identifying the tree.\n\n# Graphs\n\n## One Continuous Thing At A Time (`histogram x`)\n\n\n\n\n::: {.cell}\n\n```{.stata .cell-code}\nhistogram height, title(\"Tree Height\")\n\t\ngraph export myhistogram.png, width(1000) replace\n\n```\n:::\n\n\n\n\n![Histogram Of Tree Height](myhistogram.png){width=50%}\n\n## One Categorical Thing At A Time (`graph bar, over(x)`)\n\n\n\n\n::: {.cell}\n\n```{.stata .cell-code}\ngraph bar, over(location) title(\"Tree Location\")\n\t\ngraph export mybargraph.png, width(1000) replace\n\n```\n:::\n\n\n\n\n![Bar Graph Of Tree Location](mybargraph.png){width=50%}\n\n## Continuous by Continuous (`twoway scatter y x`)\n\n\n\n\n::: {.cell}\n\n```{.stata .cell-code}\ntwoway scatter height age_base, title(\"Tree Height by Age\")\n\t\ngraph export myscatter.png, width(1000) replace\n\n```\n:::\n\n\n\n\n![Scatterplot Of Tree Height By Age](myscatter.png){width=50%}\n\n## Categorical by Categorical (`graph bar, over(x) over(y)`)\n\n\n\n\n::: {.cell}\n\n```{.stata .cell-code}\ngraph bar, over(site) over(location) title(\"Tree Site Growth Quality by Location\")\n\t\ngraph export mybargraph2.png, width(1000) replace\n\n```\n:::\n\n\n\n\n![Bar Graph Of Tree Site By Location](mybargraph2.png){width=50%}\n\n## Continuous by Categorical (`graph bar y, over(x)`)\n\n\n\n\n::: {.cell}\n\n```{.stata .cell-code}\ngraph bar height, over(location) title(\"Tree Height by Location\")\n\t\ngraph export mybargraph3.png, width(1000) replace\n\n```\n:::\n\n\n\n\n![Bar Graph Of Mean Tree Height By Location](mybargraph3.png){width=50%}\n\n# Schemes (`,scheme(...)`)\n\nStata *graph schemes* can substantially change the look of a graph. Built in graph schemes include `s1color`, the new default scheme `stcolor`, the older default scheme `s2color`, `sj`, `economist` and `s1rcolor`. \n\n`lean2` (type `findit lean2` in the Stata Command Window) is a user written scheme that is very helpful when preparing graphics for publication. I have written a [Stata Michigan graph scheme](https://agrogan1.github.io/Stata/) that can be installed. `cleanplots` and `modern` are excellent graph schemes that can be installed directly into Stata from GitHub. `burd` is another user written graph scheme that *somewhat* replicates the look of `ggplot`. Asjad Naqvi has written [an excellent and comprehensive set of Stata graph schemes](https://github.com/asjadnaqvi/Stata-schemes).\n\n## Continuous by Continuous (`twoway scatter y x, scheme(...)`)\n\n\n\n\n::: {.cell}\n\n```{.stata .cell-code}\ntwoway scatter height age_base, title(\"Tree Height by Age\") scheme(michigan)\n\t\ngraph export myscatterM.png, width(1000) replace\n\n```\n:::\n\n\n\n\n![Scatterplot Of Tree Height By Age With Michigan Graph Scheme](myscatterM.png){width=50%}\n\n\n\n::: {.cell}\n\n```{.stata .cell-code}\ntwoway scatter height age_base, title(\"Tree Height by Age\") scheme(lean2) msymbol(o)\n\ngraph export myscatterL.png, width(1000) replace\n\n```\n:::\n\n\n\n\n![Scatterplot Of Tree Height By Age With lean2 Graph Scheme](myscatterL.png){width=50%}\n\n\n\n\n::: {.cell}\n\n```{.stata .cell-code}\ntwoway scatter height age_base, title(\"Tree Height by Age\") scheme(s1color)\n\ngraph export myscatterS.png, width(1000) replace\n\n```\n:::\n\n\n\n\n![Scatterplot Of Tree Height By Age With s1color Graph Scheme](myscatterS.png){width=50%}\n\n\n\n::: {.cell}\n\n```{.stata .cell-code}\ntwoway scatter height age_base, title(\"Tree Height by Age\") scheme(burd) ///\n  msymbol(o) graphregion(lcolor(none))\n\ngraph export myscatterB.png, width(1000) replace\n\n```\n:::\n\n\n\n\n![Scatterplot Of Tree Height By Age With burd Graph Scheme](myscatterB.png){width=50%}\n\n## Continuous by Categorical (`graph bar y, over(x) scheme(...)`)\n\n> Note that in the graph below, I have used the `asyvars` option to give different colors to the different bars.\n\n\n\n\n::: {.cell}\n\n```{.stata .cell-code}\ngraph bar height, over(location) asyvars title(\"Tree Height by Location\") scheme(michigan)\n\t\ngraph export mybarM.png, width(1000) replace\n\n```\n:::\n\n\n\n\n![Bar Graph Of Mean Tree Height By Location With Michigan Graph Scheme](mybarM.png){width=50%}\n\n\n\n::: {.cell}\n\n```{.stata .cell-code}\ngraph bar height, over(location) asyvars title(\"Tree Height by Location\") scheme(lean2)\n\t\ngraph export mybarL.png, width(1000) replace\n\n```\n:::\n\n\n\n\n![Bar Graph Of Mean Tree Height By Location With lean2 Graph Scheme](mybarL.png){width=50%}\n\n\n\n::: {.cell}\n\n```{.stata .cell-code}\ngraph bar height, over(location) asyvars title(\"Tree Height by Location\") scheme(s1color)\n\t\ngraph export mybarS.png, width(1000) replace\n\n```\n:::\n\n\n\n\n![Bar Graph Of Mean Tree Height By Location With s1color Graph Scheme](mybarS.png){width=50%}\n\n\n\n\n::: {.cell}\n\n```{.stata .cell-code}\ngraph bar height, over(location) asyvars title(\"Tree Height by Location\") scheme(burd) graphregion(lcolor(none))\n\ngraph export mybarB.png, width(1000) replace\n\n```\n:::\n\n\n\n\n![Bar Graph Of Mean Tree Height By Location With burd Graph Scheme](mybarB.png){width=50%}\n\n",
    "supporting": [
      "data-visualization-with-Stata_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": null,
    "postProcess": false
  }
}